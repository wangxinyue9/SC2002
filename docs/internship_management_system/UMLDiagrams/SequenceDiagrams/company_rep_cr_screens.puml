@startuml
title Company Representative Screens â€“ Opportunity & Application Management

actor ":Company Representative\n<<actor>>" as CR
participant "oppList:InternshipOpportunityList\n<<boundary>>" as OppList
participant "state:UIState\n<<entity>>" as UIState
database "ds:DataStorage\n<<entity>>" as DataStorage
participant "oppScreen:CROpportunityScreen\n<<boundary>>" as OppScreen
entity "opp:InternshipOpportunity\n<<entity>>" as Opportunity
participant "appList:OpportunityApplications\n<<boundary>>" as AppList
participant "crApp:CRApplicationScreen\n<<boundary>>" as CRApp
entity "app:InternshipApplication\n<<entity>>" as Application

== Opportunity Listing ==
CR -> OppList: show(uiState)
activate OppList
OppList -> UIState: read opportunity filter settings
OppList -> DataStorage: getInternshipOpportunities(filter)
activate DataStorage
DataStorage --> OppList: filtered opportunities
deactivate DataStorage

alt no opportunities
    OppList -> CR: show empty state
    OppList --> CR: back to menu
    deactivate OppList
    return
else at least one opportunity
    CR -> OppList: select opportunity row
    OppList -> UIState: setCurrentOpportunity(selected)
    OppList --> OppScreen: transition
end
deactivate OppList

== Opportunity Details ==
activate OppScreen
OppScreen -> CR: show summary + actions
alt toggle visibility
    CR -> OppScreen: choose Toggle Visibility
    OppScreen -> Opportunity: toggleVisibility()
    Opportunity --> OppScreen: visibility flipped
    OppScreen --> CR: refreshed state
else view applications
    CR -> OppScreen: choose View Applications
    OppScreen -> UIState: ensure currentOpportunity stored
    OppScreen --> AppList: transition
end
deactivate OppScreen

== Application Listing ==
activate AppList
AppList -> DataStorage: getInternshipApplications(currentOpportunity)
activate DataStorage
DataStorage --> AppList: filtered applications
deactivate DataStorage

alt no applications
    AppList -> CR: show empty state
    AppList --> CR: back to opportunity screen
    deactivate AppList
    return
else applications exist
    CR -> AppList: pick application row
    AppList -> UIState: setCurrentApplication(selection)
    AppList --> CRApp: transition
end
deactivate AppList

== Application Review ==
activate CRApp
CRApp -> CR: display application summary
alt pending & withdraw not approved & opportunity not filled
    CR -> CRApp: choose action
    alt Offer Internship
        CRApp -> Application: finalizeApplicationStatus(true)
        Application --> CRApp: status SUCCESSFUL
    else Reject Application
        CRApp -> Application: finalizeApplicationStatus(false)
        Application --> CRApp: status UNSUCCESSFUL
    end
else read-only state
    CRApp -> CR: display immutable status / withdraw note
end
CRApp --> CR: confirmation + back navigation
deactivate CRApp

@enduml
